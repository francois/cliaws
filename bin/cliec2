#!/usr/bin/env ruby
#
#  Created on 2008-4-12.
#  Copyright (c) 2008. All rights reserved.

begin
  require 'rubygems'
rescue LoadError
  # no rubygems to load, so we fail silently
end

require "main"

$:.unshift File.dirname(__FILE__) + "/../lib"
require "cliaws"

Main {
  mode("list") do
    def run
      instances = Cliaws.ec2.list
      printf "%-50s %-12s %s\n", "DNS Name", "State", "Groups"
      printf "-"*120
      print "\n"
      instances.each do |instance|
        printf "%-50s %-12s %s\n", instance.public_dns_name, instance.state, instance.groups.join(", ")
      end
    end
  end
}
